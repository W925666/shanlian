#!name=闪电UID提取-嵌入式
#!desc=从 ShanlianVPN API 响应中提取 UID，脚本嵌入配置。
#!author=W925666

[Mitm]
hostname = api.shanlianvpn.info

[Script]
# 注意：script-body 后面的代码必须是完全连续的一行，不能有换行符
ShanlianUID = type=http-response,pattern=^https?://api\.shanlianvpn\.info/app/customer/slgetNodesgs,requires-body=true,script-body=const responseBody = $response.body;if ($response.status === 200 && responseBody) {try {const body = JSON.parse(responseBody);const uid = body?.data?.uid;if (uid) {$notify("【闪电UID提取成功】", "UID 已获取", `UID: ${uid}`);console.log(`[Shanlian-UID] 成功提取到 UID: ${uid}`);} else {console.log("[Shanlian-UID] 响应 JSON 中未找到 data.uid 字段或数据结构不符。");}} catch (e) {$notify("【闪电UID提取失败】", "JSON 解析错误", `详情请查看 Loon 日志。`);console.error(`[Shanlian-UID] JSON 解析错误: ${e.message}`);}}$done({});
